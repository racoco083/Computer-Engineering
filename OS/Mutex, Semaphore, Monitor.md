## Semaphore

![image](https://user-images.githubusercontent.com/21019088/56459159-a0925900-63ca-11e9-9006-6fb34cff32a6.png)

세마포어와 뮤텍스, 모니터에 대해 잘 설명되어 있다.

https://about-myeong.tistory.com/34

세마포어 코드로 구현한 것으로 잘 설명해 놓았다.

https://www.crocus.co.kr/487

식사하는 철학자 문제

https://ko.wikipedia.org/wiki/%EC%8B%9D%EC%82%AC%ED%95%98%EB%8A%94_%EC%B2%A0%ED%95%99%EC%9E%90%EB%93%A4_%EB%AC%B8%EC%A0%9C

세마포어를 이용한 식사하는 철학자 문제 해결 방법에 대해 설명해보자. 우선 왼쪽에 있는 포크를 먼저 집고, 그 이후에 오른쪽에
있는 포크를 집는다. 식사를 마친 이후에 철학자는 두 개의 포크들을 식탁에 다시 내려놓는다. 하지만, 이 방법은 문제가 있다.
교착상태가 발생할 수 있는 것이다. 즉 모든 철학자들이 동시에 식탁에 앉고 동시에 왼쪽의 포크를 집었다고 가정해 보자.
그리고 오른쪽을 포크로 집으려 하는데 거기에는 포크가 없다. 결국 아무도 식사를 못하고 굶게 되는 것이다.
여기서 중요한 것은 각각의 포크가 세마포어이다. 그리고 데드락을 해결하는 코드와 그렇지 못 한 코드를 비교해보자.

https://colorscripter.com/s/M0I4s4f

밑의 코드 사이트 프로그램은 5개의 조건 변수로 구성된 ForkReady를 사용하는데, 각 조건 변수는 각 포크에 대응된다.
결국, 이 조건 변수는 철학자들이 포크가 사용 가능할 때까지 대기할 때 이용된다. 한편, 이 프로그램은 fork라는 이름의
벡터를 사용하는데, 이 변수는 포크가 사용 가능한지 여부를 알리기 위해 이용된다. 모니터는 2개의 프로시저로 구성된다.
get_forks()는 철학자가 2개의 포크를 요청할 때 사용하며 만일 2개 중 어떤 하나의 포크라도 이용하는 것이 허용되지 않는다면
연관된 조건 변수에서 대기한다. 이 대기는 다른 프로세스들이 모니터로 진입할 수 있게 해 준다. 철학자가 2개의 포크를 반납할 때
사용하는 것이 release_forks() 이며, 이때 대기하고 있는 프로세스가 있으면 깨워준다.

모니터를 이용한 식사하는 철학자 문제 해결 방법에 대해 설명해보자. 위의 조건과 같이 철학자는 왼쪽 포크를 먼저 집는다.
하지만 이 방법은 교착상태가 발생하지 않는다. 모니터에는 하나의 프로세스만이 진입할 수 있으며, 따라서 왼쪽 포크를
집은 철학자가 있다면 이 철학자는 다른 철학자가 간섭하기 전에 오른쪽 포크도 집을 수 있기 때문이다. 즉, 한 철학자가
모니터에 진입하였다면 그 철학자는 왼쪽 포크를 집은 이후에 오른쪽 포크를 집게 되며 그 사이에 그의 오른쪽에 앉은 철학자가
간섭하지 않음이 보장받게 된다.

즉, 왼쪽 포크를 가장 먼저 든 철학자가 모니터에 들어가며 나머지는 조건 변수에서 대기하고 모니터에 있는 철학자가
식사를 마치고 포크를 2개를 내려 놓으면 조건변수에 있던 철학자가 모니터에 들어와 식사를 하는 방식이다.

https://colorscripter.com/s/aMMRrAg
